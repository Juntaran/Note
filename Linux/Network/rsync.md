# rsync

*2017.6.20*

同步工具  

    rsync main.c machineB:/home/userB
    
1. 只要目的端和源端不一致，就会触发数据同步
2. rsync 不会同步文件的修改时间，总是会修改为最新的时间
3. rsync 不关注权限，如果目的端没有该文件，则权限一致；否则权限不变
4. rsync 要有对源文件的读权限和对目标路径的写权限
5. rsync 只能以登陆目的端的账号来创建文件，因此无法保证目的端文件所属的用户和组与源端一致。除非使用 root 权限

| 参数  | 说明  |
|---|---|
| -t  | 让 rsync 修改`modified time`，同步时会先对比时间戳，如果一致就不会修改，因此可能发生问题，可以利用`-I`解决  |
| -I  | 保证数据一致性，但是会降低速度  |
| -v  | 输出更多信息，v 越多越详细  |
| -r  | 文件夹递归同步  |
| -l  | 同步软链接文件，默认不同步  |
| -p  | 保证文件`权限`同步  |
| -o  | 保证文件`属主`同步，需要 root 权限  |
| -g  | 保证文件`属组`同步，需要 root 权限  |
| -a  | `-a` = `-rlptgoD`，无法同步`硬链接`，可以加`-H`  |
| --delete  | 必须配合`-r`，如果源端没有，则目的端也没有  |
| --delete-excluded  | 指定在目的端删除的一些东西  |
| --delete-after  | 默认先清理目的端文件再同步，加该选项会先同步再在目的端删除  |
| -n  | 配合`--delete`，在删除的时候会有提示  |
| --exclude  | 隐藏某些文件不同步  |
| --exclude-from  | 可以把隐藏文件列在一个文件里，用该选项读取  |
| -P  | `-P` = `--partial --progess`断点续传+显示进度  |
| --partial  | 断点续传  |
| --progess  | 传输进度  |

______


## Reference:
* [Linux大棚](http://www.broadview.com.cn/book/122)